const mainCharacters = [
    {
        id: 1,
        name: "Глория",
        role: "Управляющая Питтом",
        description: "Глория работает в Питтсбургском травматологическом медицинском центре. Она чрезмерно зацикливается на таких показателях, как рейтинги Press Ganey и удовлетворенность пациентов, что очень раздражает доктора Робби.",
        medicalAnalysis: "Глория была замужем, но брак закончился разводом. У неё есть взрослая дочь, однако отношения с ней крайне напряжённые — они почти не поддерживают связь. Эта семейная разобщённость остаётся для Глории болезненной темой, о которой она не любит распространяться.",
        plotRole: "Разведена. Есть дочь Мари.",
        image: "./images/Gloria.jpg"
    },
    {
        id: 2,
        name: "Доктор Майкл Робинавич",
        role: "Главный лечащий врач",
        description: "О детстве и воспитании Робби известно немного. Его мировоззрение и медицинская философия во многом сформировались под влиянием его наставника, доктора Адамсона, который умер во время пандемии COVID-19. Это событие сделало Робби эмоционально замкнутым и бескомпромиссным в своем подходе к неотложной медицине. Кроме того, Робби винит себя в смерти доктора Адамсона.",
        medicalAnalysis: "У Робби также были романтические отношения с доктором Коллинз и Джейни. Во время отношений с Джейни у Робби развились отцовские отношения с её сыном Джейком. В отношениях с доктором Коллинз доктор Коллинз забеременела, но в то время она не была готова к рождению ребёнка.",
        plotRole: "В браке с Деннисом Уитакером. Есть маленькая дочка Элизабет.",
        image: "./images/Dr. Michael Robinavitch.jpg"
    },
    {
        id: 3,
        name: "Доктор Деннис Уитакер",
        role: "Студент четвёртого курса медицинского факультета",
        description: "Уитакер, родом из Брокен-Боу, штат Небраска, — парень из маленького городка, который оставил жизнь на семейной ферме, чтобы осуществить свою мечту стать врачом. Его решимость добиться успеха остается непоколебимой, несмотря на несколько неудач, которые подрывают его уверенность и заставляют его сомневаться в своем предназначении.",
        medicalAnalysis: "В отношениях парень был всего пару раз, и оба раза — с парнями из своего же маленького городка. Оба романа закончились плачевно: тяжело, болезненно и с ощущением, что его просто использовали. После этого он стал гораздо более закрытым и с тех пор ни с кем серьёзно не сходился.",
        plotRole: "В браке с Майклом Робиновичем. Есть маленькая дочка Элизабет.",
        image: "./images/Dr. Dennis Whitaker.jpg"
    },
    {
        id: 4,
        name: "Дана Эванс",
        role: "Старшая медсестра",
        description: "Эванс — старшая из пяти детей. О её ранних годах известно немного, однако к настоящему времени она накопила 30 лет профессионального опыта, что ставит её выше большинства коллег. Верующая женщина. Также она курит. Когда один из фельдшеров замечает, что привычка её когда‑нибудь убьёт, Эванс с иронией отвечает: «Нет, мне так не повезло».",
        medicalAnalysis: "В студенческие годы Эванс познакомилась с молодым человеком — та встреча оказалась судьбоносной. С тех пор они не расставались и теперь состоят в браке. Их союз проверен временем: вместе они прошли через учёбу, становление в профессии и семейные будни. Несмотря на плотный график и стрессовую работу, Эванс сохраняет тёплые отношения с мужем, который остаётся её надёжным тылом.",
        plotRole: "Замужем. Есть две дочери.",
        image: "./images/Dana Evans.jpg"
    },
    {
        id: 5,
        name: "Доктор Хизер Коллинз",
        role: "Старший ординатор отделения неотложной медицины",
        description: "О детстве и воспитании Коллинз известно немного. Коллинз родом из Портленда, штат Орегон, и ранее работала в сфере финансов; однако после рецессии 2008 года она сменила профессию. После выкидыша уехала в другой город, чтобы усыновить ребенка.",
        medicalAnalysis: "У Коллинз были романтические отношения с Робби, во время которых она забеременела, о чем он не знал, но сделала аборт, так как в то время не была готова к рождению ребенка. Однако недавно она начала снова пытаться забеременеть, став матерью-одиночкой.",
        plotRole: "Мать-одиночка. Есть приемный сын - Тим.",
        image: "./images/Dr. Heather Collins.jpg"
    },
    {
        id: 6,
        name: "Доктор Фрэнк Лэнгдон",
        role: "Старший ординатор отделения неотложной медицины.",
        description: "В какой-то момент он женился на Эбби Лэнгдон , и у них родились дети, один из которых — Таннер Лэнгдон . В какой-то момент он получил травму спины, помогая родителям с переездом, так как был слишком скуп, чтобы платить грузчикам. Из-за этого доктор Хаган прописала ему обезболивающие и миорелаксанты. После Робби поймал и Лэнгдон отправился в рехаб на год. Теперь он выплачивает чеки от туда.",
        medicalAnalysis: "В школе он был тем самым красавчиком. Много коротких отношений — две недели, месяц, редко дольше. Легко начинал, легко выходил. Никого не обманывал, просто быстро терял интерес.",
        plotRole: "Женат. Двое детей и собака.",
        image: "./images/Dr. Frank Langdon.jpg"
    },
    {
        id: 7,
        name: "Джек Эбботт",
        role: "Лечащий врач отделения неотложной медицины.",
        description: "Эббот — ветеран армии. Эббот частично ампутирован и носит на работе протез нижней конечности. Некоторые из его коллег знают об этом, но по сути это скрытая инвалидность в течение дня, поскольку его одежда и обувь скрывают протез. История его инвалидности неизвестна.",
        medicalAnalysis: "Он был в отношениях всего два раза. И оба раза девушки уходили — говорили, что он слишком холодный. Он не специально. Просто не умел открываться. Не звонил первым, редко писал «как дела», мог молчать несколько дней. Не потому, что было всё равно. Просто внутри будто стопор: хочешь сказать что-то важное — и не можешь.",
        plotRole: "Разведен. Одиночка. Есть чувства к Доктору Самире Мохан.",
        image: "./images/Jack Abbot.jpg"
    },
    {
        id: 8,
        name: "Доктор Йоланда Гарсия",
        role: "Ординатор по травматологической хирургии.",
        description: "Хирург-травматолог, работающая в Питтсбургском травматологическом медицинском центре . Она не всегда работает в отделении неотложной помощи, но при необходимости спускается туда, чтобы руководить экстренными операциями и оказывать помощь.",
        medicalAnalysis: "Информация об отношениях отсутствует.",
        plotRole: "Есть жених.",
        image: "./images/Dr. Yolanda Garcia.jpg"
    },
    {
        id: 9,
        name: "Доктор Кэсси Маккей",
        role: "Врач-ординатор второго года обучения по специальности «Неотложная медицина».",
        description: "Маккей — выздоравливающая наркоманка. Она называет себя «другом Билла», имея в виду, что она трезва и участвует в программе «12 шагов». Маккей ранее состояла в романтических отношениях с Чадом Эшкрофтом , и у них был сын, Харрисон , которому на момент первого сезона было одиннадцать лет. Ее отношения с Чадом в какой-то момент закончились, и Маккей утверждает, что на некоторое время лишилась опеки над Харрисоном из-за своей зависимости. Она пережила «очень тяжелые времена», но сейчас трезва уже более девяти лет. В это время она училась в медицинской школе, воспитывая Харрисона.",
        medicalAnalysis: "Она встретила своего мужа в студенчестве. Он носил её сумку, ждал после пар, сделал предложение на четвёртом курсе. Потом началась зависимость. Сначала казалось — временно. Потом стало ясно: надолго. Муж пытался. Возил по клиникам, верил, прощал. Но однажды ушёл. Тихо, без объяснений.",
        plotRole: "Разведена. Есть сын.",
        image: "./images/dr.cassie McKay.jpg"
    },
    {
        id: 10,
        name: "Доктор Тринити Сантос",
        role: "Стажер",
        description: "Предполагается, что у Сантос плохие отношения с матерью, поскольку она говорит Мелу Кингу: «К сожалению, моя мать будет жить вечно», и заявляет, что не хотела бы оказаться в ситуации Джавади, потому что не хотела бы, чтобы её собственная мать работала «в пределах ста миль» от неё. Сантос свободно говорит на тагальском языке. Сантос пока не уверена, в какой области медицины она хочет работать, хотя рассматривает общую хирургию как вариант.",
        medicalAnalysis: "Ни разу не была влюблена. В школе нравились мальчики, но издалека. В институте были друзья, но не больше. На работе — симпатичные коллеги, но ничего серьезного.",
        plotRole: "Не в отношениях.",
        image: "./images/Dr. Trinity Santos.jpg"
    },
    {
        id: 11,
        name: "Доктор Мелисса Кинг",
        role: "Врач-ординатор второго года обучения по специальности «Неотложная медицина»",
        description: "Она выросла со своей сестрой Беккой , страдающей аутизмом с особыми потребностями. После смерти родителей она стала единственной сиделкой Бекки . Она ухаживала за ней на протяжении всего обучения в медицинском вузе и должна была совмещать роли врача, сестры и сиделки. Из-за этого она никогда не общалась со сверстниками.",
        medicalAnalysis: "Никогда не было отношений. Всегда была главной заучкой и заботилась о своей сестре.",
        plotRole: "Не в отношениях. Есть сестра.",
        image: "./images/Dr. Melissa King.jpg"
    },
    {
        id: 12,
        name: "Доктор Эйлин Шамси",
        role: "Хирург",
        description: "Эйлин Шамси — первоклассный хирург, чьи золотые руки и острый ум спасают жизни даже в самых безнадежных случаях. Коллеги ценят ее за профессионализм, а пациенты — за чуткое сердце и умение поддержать в трудную минуту.",
        medicalAnalysis: "После учебы Эйлин сразу пошла проходить практику в отделение неотложной медицины. Там она познакомилась со своим будущим мужем, который тоже был практикантом. С тех пор они оба так и работают там до сих пор.",
        plotRole: "Замужем. Есть взрослая дочь - Виктория.",
        image: "./images/Доктор Эйлин Шамси.png" 
    },
    {
        id: 13,
        name: "Доктор Виктория Джавади",
        role: "Студент третьего курса медицинского факультета",
        description: "Родители Джавади — врачи в PTMC. Ее мать — доктор Эйлин Шамси , хирург, а отец — эндокринолог. Джавади уже прошла две стажировки (акушерство и гинекология и педиатрия) до начала своей стажировки в Питтсбургском университете. Она говорит доктору Кэсси Маккей , что еще не уверена, в какой области медицины она склоняется.",
        medicalAnalysis: "Был милый парень с параллельного курса, но отношения быстро распались.",
        plotRole: "Не в отношениях. Есть чувства к Матео Диасу.",
        image: "./images/dr.victoria javadi.jpg"    
    },
    {
        id: 14,
        name: "Доктор Самира Мохан",
        role: "Врач-ординатор третьего года обучения по специальности «Неотложная медицина»",
        description: "Отец Мохан умер, когда ей было тринадцать лет. Обстоятельства его смерти не уточняются, но Мохан говорит, что именно он стал причиной того, что она решила посвятить себя медицине. Предполагается, что его смерть могла быть связана с неравным медицинским обслуживанием, обусловленным его расой, поскольку Мохан также говорит, что отец вдохновил ее на исследование расовых различий в лечении пациентов в отделениях неотложной помощи.",
        medicalAnalysis: "Смерть отца стала для доктора Мохан тем рубежом, за которым прежняя жизнь закончилась. Чувствуя, что не может дать партнеру ничего, кроме своей тяжести, она решила уйти.",
        plotRole: "Не в отношениях. Есть чувства к Джеку Эбботту.",
        image: "./images/dr.samira mohan.jpg"
    },
    {
        id: 15,
        name: "Перлах Алави",
        role: "Медсестра",
        description: "Медсестра в Питтсбургском травматологическом центре . Её часто можно услышать в разговорах с Принцессой на тагальском языке, на котором они обе говорят. У Перлы есть дети. В доме много домашних животных, но нет кошек или собак, так как мать Перлы научила ее, что лучше всего заводить только тех питомцев, которых можно «похоронить в море».",
        medicalAnalysis: "За плечами Перлах Алави был развод и двое детей, оставшихся с ней. Её первый брак начался с обычного знакомства через друзей, но закончился. Однако через несколько лет жизнь сделала новый поворот: она встретила Принцесс, и именно эти отношения стали для нее настоящей историей любви.",
        plotRole: "В отношениях с Принцесс. Есть дети-близняшки.",
        image: "./images/perlah alawi.jpg"
    },
    {
        id: 16,
        name: "Принцесс",
        role: "Медсестра",
        description: "Медсестра в Питтсбургском травматологическом медицинском центре. Принцесса — сплетница и обожает обсуждать слухи со своей Перлой . Однако сплетни — не единственное её качество, ведь она, как показывает практика, очень умна, ведь она владеет шестью разными языками. Кроме того, она саркастична и остроумна в своих замечаниях.",
        medicalAnalysis: "Первые отношения с Алави и считаются самыми лучшими отношениями.",
        plotRole: "В отношениях с Перлах Алави.",
        image: "./images/Princess.jpg"
    },
    {
        id: 17,
        name: "Киара Альфаро",
        role: "Социальный работник",
        description: "Социальный работник, работающая в отделении неотложной помощи Питтсбургского травматологического медицинского центра . Сотрудники центра часто обращаются к Киаре с просьбой поговорить с пациентами, которым может потребоваться поддержка в решении психологических или социально-эмоциональных проблем, и помочь им найти необходимые ресурсы в местном сообществе.",
        medicalAnalysis: "У Киары Альфаро были не очень хорошие отношения с бывшим партнёром, но, несмотря на это, они смогли сохранить тепло и остаться друзьями.",
        plotRole: "Одинока. Есть старая кошка.",
        image: "./images/kiara alfaro.jpg" 
    },
    {
        id: 18,
        name: "Джейк Мэллой",
        role: "Студент",
        description: "Он кажется знакомым лицом в больнице, поскольку несколько других сотрудников с энтузиазмом приветствуют его. Джейк объясняет, что берет выходной в школе, чтобы посетить ПиттФест, местный музыкальный фестиваль. Билеты есть у Робби, потому что они планировали пойти вместе, но Джейк решил взять с собой свою новую девушку, Лию . Как он объясняет Дане и доктору Лэнгдону , они с Лией познакомились летом, работая спасателями, и встречаются уже два месяца.",
        medicalAnalysis: "Джейк Мэллой встретил свою любовь, и они были счастливы, строя планы на будущее. Но всё оборвалось в одночасье — после теракта она погибла, оставив в его сердце незаживающую рану.",
        plotRole: "Не в отношениях.",
        image: "./images/Jake Malloy.png" 
    }
];

const secondaryCharacters = [
    {
        id: 19,
        name: "Доктор Барана Аль-Хашими",
        role: "Ординатор",
        description: "В своей медицинской практике доктор Аль-Хашими придерживается прогрессивных взглядов и выступает за модернизацию подходов в медицине. Её представления о работе отделения неотложной помощи не всегда совпадают с мнением доктора Робби, что приводит к профессиональным разногласиям.",
        medicalAnalysis: "За плечами Бараны Аль-Хашими — неудачный брак: она была замужем, но из-за особенностей ее характера отношения разрушились, и муж ушел.",
        plotRole: "Разведена. Есть маленький сын.",
        image: "./images/Доктора Барана Аль-Хашими.jpg"
    },
    {
        id: 20,
        name: "Джой Квон",
        role: "Студентка третьего курса медицинского факультета",
        description: "Она отличается строгим и принципиальным характером, обладает глубокими знаниями в медицине и проявляет интерес к мрачным темам.",
        medicalAnalysis: "Информация об отношениях отсутствует.",
        plotRole: "Не в отношениях.",
        image: "./images/joy kwon.jpg"
    },
    {
        id: 21,
        name: "Джеймс Огилви",
        role: "Студент четвёртого курса медицинского факультета",
        description: "Он отличается навязчивостью в общении и чрезмерной любовью давать советы даже тогда, когда в них не нуждаются.",
        medicalAnalysis: "В школе Джеймс Огилви был тем самым популярным парнем, которого все обожали. Фанатки буквально вешались на него толпами, но он ни с кем из них не встречался — то ли ждал кого-то особенного, то ли просто дорожил своей свободой.",
        plotRole: "Не в отношениях. Влюблен в Доктора Денниса Уитакера.",
        image: "./images/lucas iverson.jpg"
    }
];

const charactersContainer1 = document.getElementById('charactersContainer1');
const charactersContainer2 = document.getElementById('charactersContainer2');
const characterModal = document.getElementById('characterModal');
const closeModal = document.getElementById('closeModal');
const modalCharacterName = document.getElementById('modalCharacterName');
const modalCharacterRole = document.getElementById('modalCharacterRole');
const modalCharacterDesc = document.getElementById('modalCharacterDesc');
const modalCharacterMedical = document.getElementById('modalCharacterMedical');
const modalCharacterPlot = document.getElementById('modalCharacterPlot');
const modalCharacterImage = document.getElementById('modalCharacterImage');

const page1 = document.getElementById('page1');
const page2 = document.getElementById('page2');
const page1Btn = document.getElementById('page1Btn');
const page2Btn = document.getElementById('page2Btn');

function renderMainCharacters() {
    charactersContainer1.innerHTML = '';
    
    mainCharacters.forEach(character => {
        const characterCard = createCharacterCard(character);
        charactersContainer1.appendChild(characterCard);
    });
}

function renderSecondaryCharacters() {
    charactersContainer2.innerHTML = '';
    
    secondaryCharacters.forEach(character => {
        const characterCard = createCharacterCard(character);
        charactersContainer2.appendChild(characterCard);
    });
}

function createCharacterCard(character) {
    const characterCard = document.createElement('div');
    characterCard.className = 'character-card';
    
    const characterName = character.name && character.name.trim() !== "" ? character.name : "Персонаж";
    const characterRole = character.role && character.role.trim() !== "" ? character.role : "Роль неизвестна";
    const characterDesc = character.description && character.description !== "М" ? 
        (character.description.length > 120 ? character.description.substring(0, 120) + '...' : character.description) 
        : "Информация о персонаже отсутствует...";
    
    characterCard.innerHTML = `
        <div class="character-image">
            <img src="${character.image}" alt="${characterName}" onerror="this.src='https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=400'">
        </div>
        <div class="character-info">
            <div class="character-name">
                <span>${characterName}</span>
                <i class="fas fa-chevron-right"></i>
            </div>
            <div class="character-role">${characterRole}</div>
            <p class="character-desc">${characterDesc}</p>
        </div>
    `;
    
    characterCard.addEventListener('click', () => openCharacterModal(character));
    return characterCard;
}

function openCharacterModal(character) {
    modalCharacterName.textContent = character.name && character.name.trim() !== "" ? character.name : "Персонаж";
    modalCharacterRole.textContent = character.role && character.role.trim() !== "" ? character.role : "Роль неизвестна";
    modalCharacterDesc.textContent = character.description && character.description !== "М" ? character.description : "Информация о персонаже отсутствует.";
    modalCharacterMedical.textContent = character.medicalAnalysis && character.medicalAnalysis !== "." && character.medicalAnalysis !== "" ? character.medicalAnalysis : "Информация об отношениях отсутствует.";
    modalCharacterPlot.textContent = character.plotRole && character.plotRole !== "." ? character.plotRole : "Информация о семейном положении отсутствует.";
    modalCharacterImage.src = character.image;
    modalCharacterImage.alt = character.name || "Персонаж";
    
    characterModal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeCharacterModal() {
    characterModal.classList.remove('active');
    document.body.style.overflow = 'auto';
}

function showPage1() {
    page1.classList.add('active');
    page2.classList.remove('active');
    page1Btn.classList.add('active');
    page2Btn.classList.remove('active');
}

function showPage2() {
    page2.classList.add('active');
    page1.classList.remove('active');
    page2Btn.classList.add('active');
    page1Btn.classList.remove('active');
}

document.addEventListener('DOMContentLoaded', () => {
    renderMainCharacters();
    renderSecondaryCharacters();
    
    page1Btn.addEventListener('click', showPage1);
    page2Btn.addEventListener('click', showPage2);
    
    closeModal.addEventListener('click', closeCharacterModal);
    
    characterModal.addEventListener('click', (e) => {
        if (e.target === characterModal) {
            closeCharacterModal();
        }
    });
    
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && characterModal.classList.contains('active')) {
            closeCharacterModal();
        }
    });
});